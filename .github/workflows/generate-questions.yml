// Exemplo usando import em vez de require
import { createClient } from '@supabase/supabase-js';

// Ler as variáveis de ambiente definidas no GitHub Actions ou localmente
const supabaseUrl = process.env.SUPABASE_URL;
const supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY;

// Inicializar o cliente do Supabase
const supabase = createClient(supabaseUrl, supabaseServiceKey);

// Função principal autoexecutável
(async () => {
  try {
    console.log("Gerando perguntas...");

    // TODO: Coloque aqui a lógica que gera suas perguntas
    // Exemplo fictício de inserção de dados:
    /*
    const { data, error } = await supabase
      .from('perguntas')
      .insert([
        { texto: 'Pergunta de exemplo', dificuldade: 'fácil' }
      ]);

    if (error) {
      throw error;
    }
    console.log('Inserido:', data);
    */

    console.log("Perguntas geradas com sucesso!");
  } catch (err) {
    console.error("Erro ao gerar perguntas:", err);
    process.exit(1); // Para garantir que o processo retorne erro no GitHub Actions
  }
})();
